<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>My Orders - The Takeout</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <nav class="navbar">
        <div class="logo">The Takeout</div>
        <ul class="nav-links">
            <!-- Home link removed -->
            <li><a href="menu.html">Menu</a></li>
            <li><a href="booking.html">Book A Table</a></li>
            <li><a href="orders.html" class="active">Orders</a></li>
            <li><a href="feedback.html">Feedback</a></li>
            <li><a href="index.html" onclick="localStorage.setItem('openAdmin', 'true')">Admin Login</a></li>
        </ul>
    </nav>

    <section>
        <h2 style="color:var(--accent-color);">Your Orders</h2>
        <div id="orders-list">
            <p>Please login to view your orders.</p>
        </div>
        <div style="text-align:center; margin-top:1rem;">
            <a href="index.html" class="cta-button" style="background:transparent; border:1px solid white;">← Back</a>
        </div>
    </section>

    <script src="app.js"></script>
    <script>
        async function loadOrders() {
            const user = JSON.parse(localStorage.getItem('user'));
            if (!user) return;

            const res = await fetch(`/api/orders/user/${user.id}`);
            const orders = await res.json();

            const container = document.getElementById('orders-list');
            if (orders.length === 0) {
                container.innerHTML = "<p>No orders found.</p>";
                return;
            }

            container.innerHTML = orders.map(order => `
                <div style="background:rgba(255,255,255,0.05); padding:1rem; margin-bottom:1rem; border-radius:10px;">
                    <h3>Order #${order.id}</h3>
                    <p>Status: <span style="color:var(--accent-color)">${order.status}</span></p>
                    <p>Items: ${order.itemsSummary || 'N/A'}</p>
                    <p>Total: $${order.totalPrice}</p>
                </div>
            `).join('');
        }
        loadOrders();
    </script>
    <a href="index.html"
        style="position:fixed; top:80px; left:20px; z-index:1000; color:black; text-decoration:none; background:var(--accent-color); padding:5px 10px; border-radius:5px; border:1px solid rgba(255,255,255,0.2); font-weight:bold;">←
        Back to Home</a>
</body>

</html>